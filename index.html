<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Praxis Consulting Simulator</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>

</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="page active">
        <div class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <div class="logo">
                        <i class="fas fa-graduation-cap"></i>
                        <h1>PRAXIS</h1>
                    </div>
                    <p class="tagline">Professional Consulting Excellence</p>
                </div>
                <form id="loginForm" class="login-form">
                    <div class="form-group">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" id="username" class="form-control" placeholder="Enter your username" required>
                    </div>
                    <div class="form-group">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" id="password" class="form-control" placeholder="Enter your password" required>
                    </div>
                    <button type="submit" class="btn btn--primary btn--full-width">Sign In</button>
                    <div id="loginError" class="error-message hidden"></div>
                </form>
                <div class="login-footer">
                    <p>Professional Consulting Simulation Platform</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Student Lobby -->
    <div id="lobbyPage" class="page">
        <div class="container">
            <div class="lobby-header">
                <div class="logo-small">
                    <i class="fas fa-graduation-cap"></i>
                    <span>PRAXIS</span>
                </div>
                <div class="user-info">
                    <span id="currentUser"></span>
                    <button id="logoutBtn" class="btn btn--secondary">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
            
            <div class="lobby-content">
                <div class="lobby-main">
                    <div class="lobby-status">
                        <div class="status-card">
                            <div class="status-icon waiting">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="status-text">
                                <h2>Waiting for Session to Begin</h2>
                                <p>Please wait while the session administrator prepares to start the consulting simulation.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="online-users">
                        <h3>
                            <i class="fas fa-users"></i>
                            Online Participants
                            <span id="onlineCount" class="count-badge">0</span>
                        </h3>
                        <div id="onlineUsersList" class="users-grid">
                            <!-- Online users will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Student Dashboard -->
    <div id="dashboardPage" class="page">
        <div class="container dashboard-container">
            <!-- Header -->
            <div class="dashboard-header">
                <div class="header-left">
                    <div class="logo-small">
                        <i class="fas fa-graduation-cap"></i>
                        <span>PRAXIS</span>
                    </div>
                    <div class="project-info">
                        <div class="client-name" id="clientName">Waiting for Assignment</div>
                        <div class="project-type" id="projectType">Project Setup Pending</div>
                    </div>
                </div>
                
                <div class="header-right">
                    <div class="session-time">
                        <i class="fas fa-clock"></i>
                        <span id="sessionTimer">09:00 AM - 02:00 PM</span>
                    </div>
                    <div class="user-info">
                        <span id="dashboardUser"></span>
                        <button id="dashboardLogout" class="btn btn--secondary">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Main Dashboard Content -->
            <div class="dashboard-content">
                <!-- Left Panel -->
                <div class="dashboard-left">
                    <!-- Project Overview -->
                    <div class="widget project-overview">
                        <div class="widget-header">
                            <h3><i class="fas fa-briefcase"></i> Project Overview</h3>
                        </div>
                        <div class="widget-content">
                            <div class="project-details">
                                <div class="detail-item">
                                    <span class="label">Client:</span>
                                    <span class="value" id="projectClient">Pending Assignment</span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">Industry:</span>
                                    <span class="value" id="projectIndustry">TBD</span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">Challenge:</span>
                                    <span class="value" id="projectChallenge">Awaiting Faculty Setup</span>
                                </div>
                                <div class="project-description" id="projectDescription">
                                    Please wait while the faculty sets up the project parameters and team assignments.
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Timeline & Progress -->
                    <div class="widget timeline-progress">
                        <div class="widget-header">
                            <h3><i class="fas fa-chart-line"></i> Timeline & Progress</h3>
                        </div>
                        <div class="widget-content">
                            <div class="progress-info">
                                <div class="day-counter">
                                    <span class="current-day">Friday</span>
                                    <span class="total-days">10/10</span>
                                </div>
                                <div class="progress-percentage">0%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <div class="milestones">
                                <div class="milestone pending">
                                    <i class="far fa-circle"></i>
                                    <span>Waiting for Assignment</span>
                                </div>
                                <div class="milestone pending">
                                    <i class="far fa-circle"></i>
                                    <span>Team Formation</span>
                                </div>
                                <div class="milestone pending">
                                    <i class="far fa-circle"></i>
                                    <span>Project Kickoff</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Team Information -->
                    <div class="widget team-info">
                        <div class="widget-header">
                            <h3><i class="fas fa-users"></i> Team Information</h3>
                        </div>
                        <div class="widget-content">
                            <div class="team-details">
                                <div class="team-name">Team Assignment Pending</div>
                                <div class="team-members" id="teamMembers">
                                    <div style="color: #6b7280; font-size: 0.875rem;">Waiting for team formation...</div>
                                </div>
                                <div class="team-captain">
                                    <i class="fas fa-star"></i>
                                    <span>Team Captain: <span id="teamCaptain">TBD</span></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Center Panel -->
                <div class="dashboard-center">
                    <!-- Task of the Day -->
                    <div class="widget task-of-day">
                        <div class="widget-header">
                            <h3><i class="fas fa-tasks"></i> Task of the Day</h3>
                            <div class="task-priority high">WAITING</div>
                        </div>
                        <div class="widget-content">
                            <div class="task-content">
                                <h4 id="taskTitle">Waiting for Faculty to Assign Project</h4>
                                <p id="taskDescription">
                                    Please wait while the faculty sets up the consulting project and generates team assignments.
                                    Once assignments are ready, you will receive your specific client case and tasks.
                                </p>
                                <div class="task-deliverables">
                                    <h5>Current Status:</h5>
                                    <ul id="taskDeliverables">
                                        <li>Project assignment pending</li>
                                        <li>Team formation in progress</li>
                                        <li>Waiting for faculty instructions</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Assistant -->
                    <div class="widget ai-assistant">
                        <div class="widget-header">
                            <h3><i class="fas fa-robot"></i> AI Research Assistant</h3>
                            <button class="ai-toggle" id="aiToggle">
                                <i class="fas fa-expand"></i>
                            </button>
                        </div>
                        <div class="widget-content">
                            <div class="ai-chat" id="aiChat">
                                <div class="ai-message">
                                    <div class="ai-avatar">
                                        <i class="fas fa-robot"></i>
                                    </div>
                                    <div class="ai-text">
                                        Hello! I'm your AI research assistant. I can help you with market research, 
                                        analysis frameworks, and strategic thinking. What would you like to explore today?
                                    </div>
                                </div>
                            </div>
                            <div class="ai-input">
                                <input type="text" id="aiInput" placeholder="Ask me about research methods, frameworks, or analysis...">
                                <button id="aiSend" class="btn btn--primary">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                            <div class="ai-suggestions">
                                <button class="suggestion-btn" data-suggestion="market-research">Market Research Methods</button>
                                <button class="suggestion-btn" data-suggestion="competitive-analysis">Competitive Analysis</button>
                                <button class="suggestion-btn" data-suggestion="frameworks">Strategic Frameworks</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Panel -->
                <div class="dashboard-right">
                    <!-- Performance Metrics -->
                    <div class="widget performance-metrics">
                        <div class="widget-header">
                            <h3><i class="fas fa-chart-bar"></i> Performance Metrics</h3>
                        </div>
                        <div class="widget-content">
                            <div class="metric-item">
                                <div class="metric-label">Analytical Rigor</div>
                                <div class="metric-score">
                                    <span class="score">--</span>
                                    <div class="score-bar">
                                        <div class="score-fill" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-label">Strategic Thinking</div>
                                <div class="metric-score">
                                    <span class="score">--</span>
                                    <div class="score-bar">
                                        <div class="score-fill" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-label">Communication</div>
                                <div class="metric-score">
                                    <span class="score">--</span>
                                    <div class="score-bar">
                                        <div class="score-fill" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="performance-feedback">
                                <h5>Latest Feedback:</h5>
                                <p>"Performance tracking will begin once project assignment is complete."</p>
                            </div>
                        </div>
                    </div>

                    <!-- Deliverable Submission -->
                    <div class="widget deliverable-submission">
                        <div class="widget-header">
                            <h3><i class="fas fa-upload"></i> Deliverable Submission</h3>
                        </div>
                        <div class="widget-content">
                            <div class="submission-info">
                                <div class="deadline">
                                    <i class="fas fa-clock"></i>
                                    <span>Due: Pending Assignment</span>
                                </div>
                                <div class="time-remaining">
                                    <span class="countdown" id="deliverableCountdown">Waiting for tasks</span>
                                </div>
                            </div>
                            <div class="upload-area">
                                <div class="upload-box" id="uploadBox">
                                    <i class="fas fa-clock"></i>
                                    <p>Submission area will be available after project assignment</p>
                                    <input type="file" id="fileInput" multiple accept=".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx" disabled>
                                </div>
                                <button class="btn btn--primary btn--full-width" id="submitDeliverable" disabled>
                                    Awaiting Assignment
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Activity Feed -->
                    <div class="widget activity-feed">
                        <div class="widget-header">
                            <h3><i class="fas fa-list"></i> Activity Feed</h3>
                        </div>
                        <div class="widget-content">
                            <div class="activity-list" id="activityList">
                                <!-- Activity items will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Faculty Admin Panel -->
    <div id="adminPage" class="page">
        <div class="container admin-container">
            <!-- Admin Header -->
            <div class="admin-header">
                <div class="header-left">
                    <div class="logo-small">
                        <i class="fas fa-graduation-cap"></i>
                        <span>PRAXIS</span>
                    </div>
                    <h2>Faculty Admin Panel</h2>
                </div>
                <div class="header-right">
                    <div class="user-info">
                        <span>Deepak Gupta</span>
                        <button id="adminLogout" class="btn btn--secondary">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>
            </div>

            <!-- Admin Content -->
            <div class="admin-content">
                <!-- Session Control -->
                <div class="widget session-control">
                    <div class="widget-header">
                        <h3><i class="fas fa-play-circle"></i> Session Control</h3>
                    </div>
                    <div class="widget-content">
                        <div class="session-stats">
                            <div class="stat-item">
                                <div class="stat-number" id="totalStudents">104</div>
                                <div class="stat-label">Total Students</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="onlineStudents">0</div>
                                <div class="stat-label">Online Now</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="activeTeams">0</div>
                                <div class="stat-label">Active Teams</div>
                            </div>
                        </div>
                        <div class="session-controls">
                            <button id="startSession" class="btn btn--primary">
                                <i class="fas fa-play"></i> Start Session
                            </button>
                            <button id="formTeams" class="btn btn--success" style="display: none;">
                                <i class="fas fa-users"></i> Form Teams
                            </button>
                            <button id="pauseSession" class="btn btn--warning" disabled>
                                <i class="fas fa-pause"></i> Pause Session
                            </button>
                            <button id="endSession" class="btn btn--danger" disabled>
                                <i class="fas fa-stop"></i> End Session
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Project Setup & Faculty Prompts -->
                <div class="widget project-setup">
                    <div class="widget-header">
                        <h3><i class="fas fa-cogs"></i> Project Setup & Faculty Prompts</h3>
                    </div>
                    <div class="widget-content">
                        <div class="form-group">
                            <label>Project Prompt / Faculty Challenge Message</label>
                            <textarea id="projectPrompt" rows="4" placeholder="Enter project description for assignments OR instant challenge message for students (e.g., 'You have a meeting with the CEO in 5 minutes - prepare your elevator pitch!')"></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Project Duration (Days)</label>
                                <select id="projectDuration">
                                    <option value="3">3 Days</option>
                                    <option value="5" selected>5 Days</option>
                                    <option value="7">7 Days</option>
                                    <option value="10">10 Days</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Team Size</label>
                                <select id="teamSize">
                                    <option value="3">3-4 Students</option>
                                    <option value="4">4-5 Students</option>
                                    <option value="5" selected>5-6 Students</option>
                                </select>
                            </div>
                        </div>
                        <div class="button-group">
                            <button class="btn btn--primary" id="generateAssignments">
                                <i class="fas fa-magic"></i> Generate Team Assignments
                            </button>
                            <button class="btn btn--warning" onclick="handleSendFacultyPrompt()">
                                <i class="fas fa-bullhorn"></i> Send Instant Challenge
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Student Management -->
                <div class="widget student-management">
                    <div class="widget-header">
                        <h3><i class="fas fa-users-cog"></i> Student Management</h3>
                        <div class="widget-actions">
                            <input type="text" id="studentSearch" placeholder="Search students..." class="search-input">
                            <button class="btn btn--secondary" id="exportStudents">
                                <i class="fas fa-download"></i> Export
                            </button>
                        </div>
                    </div>
                    <div class="widget-content">
                        <div class="student-table-container">
                            <table class="student-table" id="studentTable">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>PRN</th>
                                        <th>Status</th>
                                        <th>Team</th>
                                        <th>Performance</th>
                                        <th>Last Login</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="studentTableBody">
                                    <!-- Student rows will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Real-time Monitoring -->
                <div class="widget monitoring">
                    <div class="widget-header">
                        <h3><i class="fas fa-monitor-heart-rate"></i> Real-time Monitoring</h3>
                    </div>
                    <div class="widget-content">
                        <div class="monitoring-grid">
                            <div class="monitor-item">
                                <h4>Active Students</h4>
                                <div class="active-students-list" id="activeStudentsList">
                                    <!-- Active students will be populated here -->
                                </div>
                            </div>
                            <div class="monitor-item">
                                <h4>Team Progress</h4>
                                <div class="team-progress-list" id="teamProgressList">
                                    <!-- Team progress will be populated here -->
                                </div>
                            </div>
                            <div class="monitor-item">
                                <h4>Recent Activity</h4>
                                <div class="activity-monitor" id="activityMonitor">
                                    <!-- Recent activities will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Faculty Prompt Challenge Popup -->
    <div id="challengePopup" class="popup-overlay hidden">
        <div class="popup-content">
            <div class="popup-header">
                <h3><i class="fas fa-exclamation-triangle"></i> Urgent Faculty Challenge</h3>
                <button class="popup-close" id="closeChallengePopup">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="popup-body">
                <div class="challenge-content" id="challengeContent">
                    <!-- Challenge content will be populated here -->
                </div>
            </div>
            <div class="popup-footer">
                <button class="btn btn--primary" id="acceptChallenge" onclick="document.getElementById('challengePopup').classList.add('hidden')">
                    <i class="fas fa-check"></i> Understood
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="app-working.js"></script>
<script>
  // Your Firebase config (put your existing config here)
  const firebaseConfig = {
    apiKey: "AIzaSyCjCMQFHlW0zFNIRQcEcG0_rAoYACDFSVw",
    authDomain: "ai--clone-project.firebaseapp.com",
    projectId: "ai--clone-project",
    storageBucket: "ai--clone-project.firebasestorage.app",
    messagingSenderId: "261068201181",
    appId: "1:261068201181:web:e1a4c3416a2c6737940f34",
    measurementId: "G-NQW5CMZV4Z"
  };

  // Initialize Firebase and Firestore
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // Gemini API function to send prompt and get response
  async function callGeminiAPI(prompt) {
    const response = await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "x-goog-api-key": "YOUR_GEMINI_API_KEY"  // Replace this with your Gemini API key
      },
      body: JSON.stringify({
        contents: [{ parts: [{ text: prompt }] }]
      })
    });
    const data = await response.json();
    return data;
  }

  // Store data in Firebase Firestore
  async function saveToFirebase(prompt, responseText) {
    await db.collection("geminiResponses").add({
      prompt: prompt,
      response: responseText,
      timestamp: new Date()
    });
  }

  // Public function you can call from anywhere in your existing webpage scripts:
  async function processPrompt(prompt) {
    const result = await callGeminiAPI(prompt);
    const answer = (result?.candidates && result.candidates.length > 0) ? result.candidates[0].output : "No response";
    await saveToFirebase(prompt, answer);
    console.log("Gemini response saved! Response:", answer);
    // Optionally alert user with response or update UI here if needed
  }
<script>
  // Existing Firebase & Gemini functions here...

  // Ask for user input with a browser popup, no UI change visible on page
  const userQuestion = prompt("Type your question for Gemini:");

  if(userQuestion) {
    // Call Gemini API and save response quietly
    processPrompt(userQuestion);
  } else {
    alert("No question typed. Nothing sent to Gemini.");
  }
</script>    
</script>
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyCjCMQFHlW0zFNIRQcEcG0_rAoYACDFSVw",
    authDomain: "ai--clone-project.firebaseapp.com",
    projectId: "ai--clone-project",
    storageBucket: "ai--clone-project.firebasestorage.app",
    messagingSenderId: "261068201181",
    appId: "1:261068201181:web:6f71995189f2b34d940f34",
    measurementId: "G-6715KDPK7R"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>    
</body>
</html>